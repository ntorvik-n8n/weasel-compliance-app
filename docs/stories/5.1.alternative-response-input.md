# Story 5.1: Alternative Response Input & Evaluation Trigger

## Story Overview

**Story ID:** 5.1
**Epic:** Epic 5 - Response Evaluation System
**Priority:** P1 (High)
**Status:** Not Started
**Story Points:** 3
**Sprint:** Sprint 6 (Epic 5)

## User Story
**As a** compliance officer
**I want** to input my own alternative to a flagged agent response and trigger an AI evaluation
**So that** I can get immediate feedback on my proposed communication strategy.

## Technical Design
1.  **Create `ResponseEvaluationPanel.tsx`:**
    -   This will be the main container component for the evaluation feature. It will manage the UI state (e.g., showing the input form, loading state, showing the results).
    -   It should be triggered from the `ViolationsPanel`, likely opening in a modal or a new side panel.
2.  **Create API Endpoint for Evaluation:**
    -   Create a new API route: `app/api/evaluate/route.ts`.
    -   The `POST` handler will accept `{ originalResponse: string, alternativeResponse: string, context: any }`.
    -   It will use the `anthropic/client.ts` to construct the detailed evaluation prompt from the PRD and call the Claude API.
    -   It must validate the AI's JSON response and return it to the client. Error handling is critical.
3.  **Implement the UI Flow:**
    -   The `ResponseEvaluationPanel` will contain a text area for the user to type their alternative response.
    -   A "Evaluate My Response" button will, when clicked, call our new `POST /api/evaluate` endpoint.
    -   The component should display a loading indicator while waiting for the API response.

## Acceptance Criteria
- [ ] A `ResponseEvaluationPanel` component is created.
- [ ] Clicking an "Evaluate" button on a violation opens this panel.
- [ ] A new `POST /api/evaluate` endpoint is created.
- [ ] The endpoint successfully calls the Anthropic API with the correct evaluation prompt.
- [ ] The user can enter text into an input field and click a button to trigger the API call.
- [ ] The UI shows a loading state while the evaluation is in progress.
- [ ] The raw JSON response from the API is successfully received by the client component.

---
*Architect: Winston*
